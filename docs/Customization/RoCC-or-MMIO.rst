.. _rocc-vs-mmio:

RoCC vs MMIO
------------

가속기 또는 사용자 정의 IO 장치는 SoC에 여러 가지 방법으로 추가할 수 있습니다:

* MMIO 주변 장치(일명 TileLink-Attached Accelerator)
* Tightly-Coupled RoCC Accelerator

이 접근 방식들은 프로세서와 사용자 정의 블록 간의 통신 방법에서 차이가 있습니다.

TileLink-Attached 접근 방식에서는 프로세서가 메모리 맵 레지스터를 통해 MMIO 주변 장치와 통신합니다.

반대로, 프로세서는 RoCC 가속기와 RISC-V ISA 인코딩 공간에 예약된 사용자 정의 프로토콜과 사용자 정의 비표준 ISA 명령어를 통해 통신합니다.
각 코어는 최대 네 개의 가속기를 사용자 정의 명령어로 제어할 수 있으며, CPU와 자원을 공유합니다.
RoCC 코프로세서 명령어는 다음과 같은 형식을 가집니다.

.. code-block:: none

    customX rd, rs1, rs2, funct

여기서 X는 0-3 사이의 숫자로, 명령어의 opcode를 결정하며, 어떤 가속기로 명령어가 라우팅될지를 제어합니다.
``rd``, ``rs1``, ``rs2`` 필드는 목적지 레지스터와 두 개의 소스 레지스터의 레지스터 번호를 나타냅니다.
``funct`` 필드는 가속기가 서로 다른 명령어를 구분하는 데 사용할 수 있는 7비트 정수입니다.

RoCC 인터페이스를 통한 통신은 사용자 정의 소프트웨어 툴체인이 필요하지만, MMIO 주변 장치는 적절한 드라이버 지원을 통해 표준 툴체인을 사용할 수 있습니다.

